<div><%= link_to l(:label_synonym_new), new_synonym_path, class: 'icon icon-add' %></div>
<% synonyms = Synonym.all.order(:term) %>
<% if synonyms.present? %>
  <table class="list synonyms">
    <thead>
      <tr>
        <th><%= l(:field_name) %></th>
        <th><%= l(:field_synonyms) %></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% synonyms.each do |s| %>
        <tr class="edit-synonym" data-keyterm="<%= s.term %>">
          <td class="term editable"><%= s.term %></td>
          <td class="synonyms multieditable"><%= s.synonyms.join(',') %></td>
          <td class="buttons">
            <%= link_to l(:button_edit), edit_synonym_path(s), class: 'icon icon-edit' %>
            <%= delete_link(synonym_path(s)) %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p class="nodata"><%= l(:label_no_data) %></p>
<% end %>
<div>
  <button type="button" class="add-button" id="add-synonym"><%= l(:label_synonym_new) %></button>
</div>
<dialog id="dialog-new-synonym" class="dialog-panel-new">
  <h2><%=l(:label_synonym_new)%></h2>
  <% tmp_synonym = Synonym.new %>
  <%= form_with model: tmp_synonym do |f| %>
    <%= error_messages_for 'synonym' %>
    <table class="synonym-form">
      <tbody>
        <tr>
          <td><%= f.label l(:label_term) %></td>
          <td><%= f.text_field :term, required: true %></td>
        </tr>
        <tr>
          <td><%= f.label l(:label_synonyms) %></td>
          <td id="synonym-form-synonyms">
            <div>
              <%= f.text_field :synonyms, name: 'synonym[synonyms][]', required: true %>
            </div>
            <div class="buttons">
              <%= link_to '', '#', class: 'icon icon-add', id: 'add-synonym-word' %>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <%= javascript_tag do %>
$(function() {
  $('#add-synonym-word').on('click', function() {
    $content = $('<div class="synonym-words-added"><input name="synonym[synonyms][]" required="required" type="text"><a class="icon icon-del del-synonym"></a></div>');
    $content.find('.del-synonym').on('click', function(e) {
      e.preventDefault();
      $(this).parent().remove();
    });
    $(this).parent().before($content);
  });
});
    <% end %>
    <div class="buttons">
      <button type="button" class="dialog-button-submit" id="submit-dialog-new-synonym"><%= l(:button_create) %></button>
      <button type="button" class="dialog-button-cancel" id="cancel-dialog-new-synonym"><%= l(:button_cancel) %></button>
    </div>
  <% end %>
</dialog>